<VirtualHost *:<%= @port %>>
  ServerAdmin <%= @server_admin %>

  DocumentRoot <%= @docroot_dir %>
  <% if @error_log =~ /^syslog:/ || @error_log =~ /^\|/ %>
  ErrorLog <%= @error_log %>
  <% else %>
  ErrorLog <%= @log_dir %>/<%= @error_log %>
  <% end %>
  <% if @error_log =~ /^syslog:/ || @error_log =~ /^\|/ %>
  CustomLog <%= @access_log %> combined
  <% else %>
  CustomLog <%= @log_dir %>/<%= @access_log %> combined
  <% end %>

  <% if %w{ rhel fedora amazon }.include?(node['platform_family']) -%>
  #
  # This configuration file enables the default "Welcome"
  # page if there is no default index page present for
  # the root URL.  To disable the Welcome page, comment
  # out all the lines below.
  #
  <LocationMatch "^/+$">
    Options -Indexes
    ErrorDocument 403 /error/noindex.html
  </LocationMatch>
  <% end -%>
</VirtualHost>
