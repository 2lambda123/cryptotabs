# This file was generated by Chef for <%= node['fqdn'] %>.
# Do NOT modify this file by hand!

<% listen = Hash[node['apache']['listen'].map {|address, ports| [address, ports.map(&:to_i)]}] -%>
<% if node['apache']['listen_ports'] && node['apache']['listen_addresses'] -%>
<% node['apache']['listen_addresses'].uniq.each do |address| -%>
<% listen[address] ||= [] -%>
<% node['apache']['listen_ports'].map(&:to_i).uniq.each do |port| -%>
<% listen[address] = (listen[address] + [port]).uniq -%>
<% end -%>
<% end -%>
<% end -%>
<% listen.each do |address, ports| -%>
<% ports.each do |port| -%>
<% if address.empty? -%>
Listen <%= port %>
<% else -%>
Listen <%= address %>:<%= port %>
<% end -%>
<% if node['apache']['version'] != "2.4" -%>
NameVirtualHost *:<%= port %>
<% end -%>
<% end -%>
<% end -%>
